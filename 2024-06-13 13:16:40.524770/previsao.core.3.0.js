var graficos=["ondas","vento","energia","tempo","mares"];var tipoOndas=['total','vagas','sul','norte'];var liga=false;var c,d,maxSwell,maxDias,maxAltura,maxVento,maxPressao,minPressao,maxPrecip,maxTemper,minTemper,diaIni,mesIni,maxMares,dateStamp,dateStamp2,anoIni=0;maxDias=maxAltura=maxVento=maxMares=maxPressao=maxPrecip=diaIni=mesIni=0;minTemper=minPressao=10000;maxTemper=-100;var maresDia,idTempo,fuso,dSem;var raioEspectro=115;var cxEspectro=130;var cyEspectro=130;var direcao=false;var tipoMapaGoogle=1;var tendencia="";maresDia=idTempo="";var previsaoAntiga=false;var espectro=0;var lista_imagens=['00','012','018','036','042','060','066','084','090','108','114','132','138','156','162','180','186'];var diaFim=[0,31,28,31,30,31,30,31,31,30,31,30,31];var limitePeriodo=[0,0,35,55,75,85,95,105,115,125,135,145,155,165,175,185,195,205];var limite_nos=[0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56];var limite_temper=[0,0,3,6,9,12,15,18,21,24,27,30,33,36,39,42];var unidadesRazao=[1,1.852,0.514,1.15];var mostraSurf=false;var mostraEnergia=true;var idBoia="";var idEstacao="";var boias=[];var estacoes=[];var mostra_grafico_weather=false;var corPeriodo=['4177c8','24b2ea','00dfff','0ff','0fc','0f9','0f0','9f0','cf0','ff0','fc0','f90','f60','f00','af2f5f','cf1f8f','f0f'];var limitePeriodoBoia=[2,4,6,8,9,10,11,12,13,14,15,16,17,18,19,20];var mapaNome='';var mapaZoom='';var jsAtmos='';var jsOcean='';var dataAtualizacao='';var dataAtualizacaoAtmos='';var dataDiaAtmos='';var dataDiaOceano='';var adicionaDiaAtmos='';var atualizado=0;var atualizadoMet=0;var mapaAtualizacao='';var mapaZoomAtualizacao='';var offsetMapaZoomAtualizacao='';var mapaAtualizacaoAtmos='';var mapaZoomAtualizacaoAtmos='';var offsetMapaAtualizacaoAtmos='0';var offsetMapaZoomAtualizacaoAtmos='';var linkText="";var inLink=false;var graficoLink=-1;var hmax=2.0;var vmax=20;var ymax=20;var fatorBoia=5;var temVento=false;var temOndas=false;var temTemp=false;var temDir=false;var temDirVento=false;var temDadosHoje=false;var tsmFull=100;var tsm=100;var temAstro=false;var linkTextEstacao="";var inLinkEstacao=false;var fatorEstacao=5;var temVentoEstacao=false;var temDirVentoEstacao=false;var temRajada=false;var temTempEstacao=false;var temPressao=false;var temUmidade=false;var temOrvalho=false;var temPrecipitacao=false;var temRadiacao=false;var temIndiceCalor=false;var temUv=false;var temTempo=false;var temIcone=false;var pressaoEstacaoPlotada=false;var vmaxEstacao=20;var gmax=20;var tmax=20;var pmax=20;var omax=0;var ppmax=0;var rmax=0;var imax=0;var uvmaxEstacao=0;var tmin=1000;var pmin=2000;var omin=1000;var imin=1000;var alturaMinEstacao=150;var alturaMaxEstacao=640;var graficos_estacoes=false;var dat=new Array(2);var horaBoia=new Array(2);var alturaSig=new Array(2);var alturaMax=new Array(2);var periodoBoia=new Array(2);var direcaoOndas=new Array(2);var vento=new Array(2);var ventoDir=new Array(2);var rajada=new Array(2);var pressao=new Array(2);var artemp=new Array(2);var martemp=new Array(2);var xBotao=new Array(52);var cc=0;var hmax=0.0;var altMaxMare=0;var vmax=0;var tmax=0;var nome="";var status="";var site="";var desc="";var linkWidth=0;var linkHeight=30;var linkXini=10;var linkYini=30;var datEstacao="";var diasemEstacao=0;var hEstacao=0;var dataEstampa=new Array(16);var semEstampa=new Array(16);var diaEstampa=new Array(16);var horaEstacao=new Array(25);var ventoEstacao=new Array(25);var ventoDirEstacao=new Array(25);var rajadaEstacao=new Array(25);var orvalho=new Array(25);var umidade=new Array(25);var precipitacao=new Array(25);var radiacao=new Array(25);var indiceCalor=new Array(25);var pressaoEstacao=new Array(25);var artempEstacao=new Array(25);var tempo=new Array(25);var uv=new Array(25);var icone=new Array(25);var dd=cc=0;var hmax=0.0;var vmaxEstacao=0;var nomeEstacao="";var siteEstacao="";var linkEstacao="";var linkEstacaoWidth=120;var linkEstacaoHeight=85;var linkEstacaoXini=500;var linkEstacaoYini=25;var mostraRosaEstacao=false;var iconUrl="img/icones/";var imageObj=new Image();var boltImg=new Image();var logoObj=new Image();var sunriseObj=new Image();var sunsetObj=new Image();var moonriseObj=new Image();var moonsetObj=new Image();var moonObj=new Image();var desenhaO=false;var tempoObj=new Array();var botao=new Array(2);for(dd=0;dd<2;dd++){botao[dd]=new Array(3);for(cc=0;cc<3;cc++)botao[dd][cc]=0;}
var hBotao=new Array(24);for(dd=0;dd<24;dd++)hBotao[dd]=-1;for(cc=0;cc<25;cc++){horaEstacao[cc]="";ventoEstacao[cc]="";ventoDirEstacao[cc]="";rajadaEstacao[cc]="";orvalho[cc]="";umidade[cc]="";precipitacao[cc]="";radiacao[cc]="";indiceCalor[cc]="";pressaoEstacao[cc]="";artempEstacao[cc]="";uv[cc]="";tempo[cc]="";icone[cc]="";}
var idTipo=0;var unid_vento=0;var ventoOk=false;var espectralOk=false;var cameraOk=false;var mostraEspectro=false;var ajusteKmH=false;var flagAM=false;var flag7dias=false;var numRegiao=4;var numAtraso=0;var numAtraso2=0;var numAtrasoDados=0;var numAtrasoDadosMeteoro=0;var numAtrasoZoom=0;var dIni=1;var dia_atual=1;var cliquesX=new Array(20);var cliquesY=new Array(20);var cliquesTexto=new Array(20);var cliquesId=new Array(20);var cliquesLink=new Array(20);var valores_metros=['9.0','8.0','7.0','6.0','5.0','4.5','4.0','3.5','3.0','2.5','2.0','1.5','1.0','0.5'];var valores_segundos=[19,17,16,15,14,13,12,11,10,9,8,6,4,2];var valores_nos=[56,52,48,44,40,36,32,28,24,20,16,12,8,4];var idHoraPM=['9','15'];var tip2=['','h','p','v'];var idHora=['','9','15'];var tip=['','tam2','per','ven'];var abrevOceano=["atlanticoSul","atlanticoNorte","indico","pacificoSudoeste","pacificoSudeste","pacificoNoroeste","pacificoNordeste"];var tabelaPreenchida=false;var img=new Array(62);var imgBr=new Array(62);var imgOk=new Array(62);for(c=0;c<63;c++){img[c]=new Array(4);imgBr[c]=new Array(4);imgOk[c]=new Array(4);for(var d=0;d<5;d++){img[c][d]=new Array(17);imgBr[c][d]=new Array(17);}}
var idDiaOceano=new Array(18);var idDiaAtmos=new Array(18);var rotuloDia=new Array(18);var dadosAltura=new Array(17);var dadosSurf=new Array(17);var dadosPeriodo=new Array(17);var dadosDirPrim=new Array(17);var dadosVentoMar=new Array(17);var dadosDirVentoMar=new Array(17);var dadosRajadaVento=new Array(17);var dadosNuvens=new Array(17);var dadosCape=new Array(17);var dadosPressao=new Array(17);var dadosTemper=new Array(17);var dadosPrecip=new Array(17);var dadosVento=new Array(17);var dadosDirVento=new Array(17);var dadosVagas=new Array(17);var dadosVagasSurf=new Array(17);var dadosPerVag=new Array(17);var dadosDirVag=new Array(17);var dadosSul=new Array(17);var dadosSulSurf=new Array(17);var dadosPerSul=new Array(17);var dadosDirSul=new Array(17);var dadosNorte=new Array(17);var dadosNorteSurf=new Array(17);var dadosPerNorte=new Array(17);var dadosDirNorte=new Array(17);var dadosMares=new Array(17);var dadosAltSwell=new Array(17);var dadosPerSwell=new Array(17);var dadosDirSwell=new Array(17);var maxAlturaSwell=new Array(17);var minDirSwell=new Array(17);var maxDirSwell=new Array(17);var dadosEnTot=new Array(17);var dadosPoTot=new Array(17);var dadosEnVagas=new Array(17);var dadosPoVagas=new Array(17);var dadosEnSul=new Array(17);var dadosPoSul=new Array(17);var dadosEnNorte=new Array(17);var dadosPoNorte=new Array(17);for(c=1;c<=17;c++){dadosAltura[c]=new Array(8);dadosSurf[c]=new Array(8);dadosPeriodo[c]=new Array(8);dadosDirPrim[c]=new Array(8);dadosVagas[c]=new Array(8);dadosVagasSurf[c]=new Array(8);dadosPerVag[c]=new Array(8);dadosDirVag[c]=new Array(8);dadosSul[c]=new Array(8);dadosSulSurf[c]=new Array(8);dadosPerSul[c]=new Array(8);dadosDirSul[c]=new Array(8);dadosNorte[c]=new Array(8);dadosNorteSurf[c]=new Array(8);dadosPerNorte[c]=new Array(8);dadosDirNorte[c]=new Array(8);dadosVento[c]=new Array(8);dadosDirVento[c]=new Array(8);dadosVentoMar[c]=new Array(8);dadosDirVentoMar[c]=new Array(8);dadosRajadaVento[c]=new Array(8);dadosNuvens[c]=new Array(8);dadosCape[c]=new Array(8);dadosPressao[c]=new Array(8);dadosTemper[c]=new Array(8);dadosPrecip[c]=new Array(8);dadosMares[c]=new Array(8);dadosEnTot[c]=new Array(8);dadosPoTot[c]=new Array(8);dadosEnVagas[c]=new Array(8);dadosPoVagas[c]=new Array(8);dadosEnSul[c]=new Array(8);dadosPoSul[c]=new Array(8);dadosEnNorte[c]=new Array(8);dadosPoNorte[c]=new Array(8);dadosAltSwell[c]=new Array(8);dadosPerSwell[c]=new Array(8);dadosDirSwell[c]=new Array(8);for(d=1;d<9;d++){dadosAltSwell[c][d]=new Array(8);dadosPerSwell[c][d]=new Array(8);dadosDirSwell[c][d]=new Array(8);}
maxAlturaSwell[c]=maxDirSwell[c]=0;minDirSwell[c]=1000;}
var larg=13;var imagem_atual=1;var dia_atual=1;var tipoImagem=1;var tipoImagem2=8;var yImagem=0;var xImagem=0;var xImagemLr=0;var yImagemBr=0;var xImagemBr=0;var xImagemBr2=0;var xImagemBrLr=0;var proximoDia=0;var offsetOceano=0;var codigo="";var codigo2="";var codigoZoom="";var pro=0;var sitePref="";var locais="";var query="";var xScrollPos=0;var dx=0;var larguraColunaDia=65;var fator=5;var interWidth="4160";var numDiaImg=0;var numMesImg=0;var numAnoImg=0;var dSemImg=0;var data;var dadosMares=new Array(17);var dadosAstros=new Array(17);var hStepMare=23;var vMaxMare=150;var diaClicavelMare=0;var maxDiasMare=0;var diaIniMares=1;var diaSelectMare=1;var setaOverMare=0;var hMedMare=0.0;var relX_mare=relY_mare=relX_Estacao=relY_Estacao=relX_boia=relY_boia=0;var letreiroOn=true;var limiteEsq=337;var limiteDir=652;var extensao=323;var extensaoPro=652;var extensaoMet=200;var fx=0.027;var barra_dias_dx=-1.8;var graficos_dx=-1.85;for(c=1;c<=17;c++){dadosMares[c]=new Array(8);dadosAstros[c]=new Array(8);for(d=0;d<8;d++){dadosMares[c][d]="";dadosAstros[c][d]="";}}
var numDiaFinal=9;var max_energia=0;var max_potencia=0;var dadosEnergia=new Array(17);var dadosFator=new Array(17);var valor=new Array(17);var totDir=new Array(17);var tamTot=new Array(17);for(c=0;c<18;c++){dadosEnergia[c]=new Array(2);dadosFator[c]=new Array(2);valor[c]=new Array(2);totDir[c]=new Array(2);tamTot[c]=new Array(2);for(d=0;d<=2;d++){dadosEnergia[c][d]="";dadosFator[c][d]=0;valor[c][d]=new Array(24);totDir[c][d]=new Array(24);for(h=0;h<24;h++){valor[c][d][h]=new Array(25);totDir[c][d][h]=0;}}}
var stepPotencia=50;var stepEnergia=500;var primeiraHora=0;var segundaHora=12;var corEspectro=new Array('000000','000000','002458','0070e0','00b4e0','00d8d8','00dca8','00dc00','98dc00','e0dc00','e0b000','e08400','e05800','e00000','af2f5f','c02e8a','ab6bab');var limiteAlturaEspectro=new Array(1,2,3,5,8,12,17,23,31,40,50,62,74,87,101,117,117);var perEspectro=new Array(24.3,22.1,20.1,18.2,16.6,15.1,13.7,12.5,11.3,10.3,9.3,8.5,7.6,7.0,6.4,5.8,5.3,4.8,4.4,4.0,3.6,3.3,3.0,2.7,2.5,0);var localidade="";var energia_resumo_on=true;var relX_tempo=0;var relY_tempo=0;var gxHoraTempo=13;var gyTempo=160;var gyNuvens=20;var separaDias=1.5;var hexa=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");var idTipoTempo="temper";var dyTemper=0;var dyPressao=0;var dyPrecip=0;var idTipo=0;var diaIniMeteoro=0;var mesIniMeteoro=0;var anoIniMeteoro=0;var dSemMeteoro=0;var dadosMeteoro=new Array(16);var diaIniOceano=0;var mesIniOceano=0;var anoIniOceano=0;var dSemOceano=0;var dadosOceano=new Array(16);var dadosPraia=new Array(16);var idadeLua=new Array(16);var sequenciaIdDias=new Array();for(cc=0;cc<16;cc++){dadosOceano[cc]="";dadosPraia[cc]="";dadosMeteoro[cc]="";}
var maxDias=8;var totalHoras=8;var tipoVento=0;var paisIni="";var estadoIni="";var cidadeIni="";var praiaIni="";$(function(){paisIni=pais;estadoIni=estado;cidadeIni=municipio;praiaIni=praia;if(parseInt(anoHoje/4)===anoHoje/4){diaFim[2]=29;}
$("#consultar_mapas").click(function(){var url="";if(praia_id==0){praia="";}
if(pais===""||estado===""||municipio===""){url="mapas/"+paisIni+"/"+estadoIni+"/"+cidadeIni+"/"+praiaIni;}else{url="mapas/"+pais+"/"+estado+"/"+municipio+"/"+praia;}
window.location.href=webroot+url;});praia_id=parseInt(praia_id);mostraEspectro=mostraSurf=(praia_id>0);locais=pais+"/"+estado+"/"+municipio;if(praia.length>2)locais=locais+"/"+praia;else locais=locais+"/oceanica";$("#seleciona_mapas").click(function(){window.location.href=webroot+"mapas/"+locais;});$("#seleciona_espectral").click(function(){window.location.href=webroot+"previsao/espectral/"+locais;});$("#seleciona_hoje").click(function(){$("#datepicker").val("");document.hindcast_form.submit();});$("#seleciona_historico").click(function(){$("#seleciona_historico").hide();$("#hindcast_form").show();});$("#datepicker").change(function(){$("#btn-ver").show();});$('#nome-procura').on('input',function(){var nome=$('#nome-procura').val();var c=0;var div="";if(nome.length>3){var fonte="/locais/procuraPraia?nome="+nome;$.getJSON(fonte,function(data){$("li[id^='sugestao']").each(function(c){$(this)[0].remove();});$('#div_sug').show();$.each(data,function(i,dadosPraia){if(c==0)div='#div_sug';else div='#sugestao'+c;$(div).after($('#div_sug').clone().attr("id","sugestao"+String(c+1)));c++;if(idioma==0)pronome=" EM ";else pronome=" AT ";$('#sugestao'+c+' a').html(dadosPraia.nome+pronome+dadosPraia.localizacao).attr("href","/previsao/"+dadosPraia.slug);});$('#div_sug').hide();$('#sugestoes').show();});}else{$('#sugestoes').hide();$("li[id^='sugestao']").each(function(c){$(this)[0].remove();});}});});function carregaMunicipio(){var params=[$("#paisPrevisao").val(),$("#estadoPrevisao").val(),$('#municipioPrevisao').val()];window.location.href=webroot+"previsao/"+params.join("/")+query;}
function carregaPraia(){var params=[$("#paisPrevisao").val(),$("#estadoPrevisao").val(),$('#municipioPrevisao').val(),$('#praiaPrevisao').val()]
window.location.href=webroot+"previsao/"+params.join("/")+query;}
function carregaEstado(){estado=$("#estadoPrevisao").val();if(estado!=""){$("#praiaPrevisao").hide(100,function(){$("#praia_seletor_previsao").empty();});numLit=0;municipio="";$("#municipioPrevisao").hide();$("#municipio_seletor_previsao").empty();leJsonMunicipio();}}
function carregaPais(){pais=$("#paisPrevisao").val();if(pais=="mundo"){window.location.href=webroot+"previsao/mundo";}else if(pais!=""){estado="";municipio="";numLit=0;$("#estadoPrevisao").hide(500,function(){$("#estado_seletor_previsao").empty();leJsonEstado();});$("#municipioPrevisao").hide(500,function(){$("#municipio_seletor_previsao").empty();});$("#praiaPrevisao").hide(500,function(){$("#praia_seletor_previsao").empty();});}}
var timeOutOceano=null;function lerJsonOceano(){var data=ondas;if(data.nodata){if(idioma==0)txt="NAO EXISTEM DADOS REGISTRADOS PARA ESTA DATA!";else txt="THERE IS NO DATA RECORDED FOR THIS DATE!";$("#aguarde_dados_altura").html(txt);alert(txt);return;}
var d,dd,mm,aa,c,i,j,k=0;maxMares=0;var valores=new Array(8);var variaveis=new Array(23);diaIniOceano=parseInt(data.dados.dia);mesIniOceano=parseInt(data.dados.mes);anoIniOceano=parseInt(data.dados.ano);dSemOceano=parseInt(data.dados.dsem);diaIni=diaIniOceano;mesIni=mesIniOceano;anoIni=anoIniOceano;dSem=dSemOceano;for(d=1;d<=numDiaFinal;d++){dadosOceano[d]=eval("data.dados.v"+String(d-1));if(praia_id>0){dadosPraia[d]=eval("data.dados.s"+String(d-1));}
if(typeof(dadosOceano[d])!="undefined"&&dadosOceano[d].length>16){variaveis=dadosOceano[d].split(";");for(c=0;c<22;c++){if(variaveis[c]!=undefined){valores=variaveis[c].split(":");for(i=1;i<=8;i++){switch(c){case 0:dadosAltura[d][i]=Number(valores[i-1]);if(maxAltura<dadosAltura[d][i])maxAltura=dadosAltura[d][i];break;case 1:dadosPeriodo[d][i]=Number(valores[i-1]);break;case 2:dadosDirPrim[d][i]=Number(valores[i-1]);break;case 3:dadosEnTot[d][i]=Number(valores[i-1]);if(max_energia<dadosEnTot[d][i-1]){max_energia=dadosEnTot[d][i-1]}
break;case 4:dadosPoTot[d][i]=Number(valores[i-1]);if(max_potencia<dadosPoTot[d][i]){max_potencia=dadosPoTot[d][i]}
break;case 5:dadosVagas[d][i]=Number(valores[i-1]);break;case 6:dadosPerVag[d][i]=Number(valores[i-1]);break;case 7:dadosDirVag[d][i]=Number(valores[i-1]);break;case 8:dadosEnVagas[d][i]=Number(valores[i-1]);break;case 9:dadosPoVagas[d][i]=Number(valores[i-1]);break;case 10:dadosSul[d][i]=Number(valores[i-1]);break;case 11:dadosPerSul[d][i]=Number(valores[i-1]);break;case 12:dadosDirSul[d][i]=Number(valores[i-1]);break;case 13:dadosEnSul[d][i]=Number(valores[i-1]);break;case 14:dadosPoSul[d][i]=Number(valores[i-1]);break;case 15:dadosNorte[d][i]=Number(valores[i-1]);break;case 16:dadosPerNorte[d][i]=Number(valores[i-1]);break;case 17:dadosDirNorte[d][i]=Number(valores[i-1]);break;case 18:dadosEnNorte[d][i]=Number(valores[i-1]);break;case 19:dadosPoNorte[d][i]=Number(valores[i-1]);break;case 20:dadosVentoMar[d][i]=Number(valores[i-1]);if(maxVento<dadosVentoMar[d][i])maxVento=dadosVentoMar[d][i];break;case 21:dadosDirVentoMar[d][i]=Number(valores[i-1]);break;}}}}
if(variaveis[22]!=undefined){valores=variaveis[22].split(":");dadosEnergia[d][0]=valores[0];dadosFator[d][0]=parseInt(valores[1]);dadosEnergia[d][1]=valores[2];dadosFator[d][1]=parseInt(valores[3]);}
c=0;if(variaveis[23]!=undefined){maresDia=variaveis[23];if(!(estacaoMare=="-"||maresDia=="0"||maresDia=="")){while(c<maresDia.length){dadosMares[d][c/6]=maresDia.substr(c,6);c=c+6;if(maxMares<c/6){maxMares=c/6}}
if(c>1)maxDiasMare++;c=c/6;}
while(c<=8){dadosMares[d][c]="";c++;}}
c=0;if(variaveis[24]!=undefined){astrosDia=variaveis[24];if(d==1)temAstro=(astrosDia.length>4);if(temAstro){while(c<astrosDia.length){dadosAstros[d][c/5]=astrosDia.substr(c,5);c=c+5;}
c=c/5;while(c<=8){dadosAstros[d][c]="";c++;}}}
if(variaveis[25]!=undefined){idadeLua[d]=parseInt(variaveis[25]);}}
if(praia_id>0){if(dadosPraia[d].length>16){variaveis=dadosPraia[d].split(";");for(c=0;c<4;c++){valores=variaveis[c].split(":");for(i=1;i<=8;i++){switch(c){case 0:dadosSurf[d][i]=Number(valores[i-1]);if(maxAltura<dadosSurf[d][i])maxAltura=dadosSurf[d][i];break;case 1:dadosVagasSurf[d][i]=Number(valores[i-1]);break;case 2:dadosSulSurf[d][i]=Number(valores[i-1]);break;case 3:dadosNorteSurf[d][i]=Number(valores[i-1]);}}}}}
dd=diaIniOceano+d-1;mm=mesIniOceano;aa=anoIniOceano;if(dd>diaFim[mm]){dd-=diaFim[mm];mm++;if(mm>12){mm=1;aa++;}}
idDiaOceano[d]=10000*(aa-2000)+100*mm+dd;}
dateStamp=data.dados.dateStamp;dateStamp2=data.dados.dateStamp2;tsmFull=Number(data.dados.tsm);if(unidadeTemperatura=='f'){tsm=Math.round(9*tsmFull/5+32);}else{tsm=Math.round(tsmFull);}
if(tsm==100||tsm==0){$('#box_tsm').hide();}
if(praia_id==0){praia_lat=lat;praia_lon=lon;praia_zoom=8;}
var hmax=0;var hmin=100;for(dd=1;dd<=maxDiasMare;dd++){for(c=0;c<maxMares;c++){if(!(typeof(dadosMares[dd])=="undefined"||typeof(dadosMares[dd][c])=="undefined")){if(dadosMares[dd][c]!=""){h=Math.floor(dadosMares[dd][c].substr(4,2));if(hmax<h)hmax=h;if(hmin>h)hmin=h;}}}}
hmax=hmax/10;hmin=hmin/10;h=Math.round(hmax);altMaxMare=hmax;diaIniMares=1+numAtrasoDados;diaSelectMare=diaIniMares;fuso=fuso_horario;var aoc=anoIniOceano;if(aoc>2000)aoc-=2000;var unixHoje=new Date(anoHoje,mesHoje-1,diaHoje);var unixOceano=new Date(aoc,mesIniOceano-1,diaIniOceano);numAtrasoDados=parseInt((unixHoje-unixOceano)/86400000);while(dSem>7){dSem-=7;}
setaSequenciaIdDias();mostraValoresOceano();}
function ajudaSurf(){window.location.href="https://surfguru.com.br/conteudo/estimando-a-altura-das-ondas-nos-picos-de-surf-2017-01-17-15335.html";}
function ajudaEnergia(){window.location.href="https://surfguru.com.br/conteudo/entenda-a-energia-e-a-potencia-das-ondas-2019-07-29-12844.html";}
var timeOutMeteoro=null;function lerJsonMeteoro(){ha=2;hb=4;hc=6;hd=8;bg="";var data=meteoro;if(data.nodata){if(idioma==0)txt="NAO EXISTEM DADOS REGISTRADOS PARA ESTA DATA!";else txt="THERE IS NO DATA RECORDED FOR THIS DATE!";$("#aguarde_dados_altura").html(txt);alert(txt);return;}
var d,c,i,j,k=0;var valores=new Array(8);var variaveis=new Array(8);diaIniMeteoro=parseInt(data.dados.dia);mesIniMeteoro=parseInt(data.dados.mes);anoIniMeteoro=parseInt(data.dados.ano);dSemMeteoro=parseInt(data.dados.dsem);for(d=0;d<=numDiaFinal;d++){dadosMeteoro[d+1]=eval("data.dados.v"+d);}
for(d=1;d<=numDiaFinal+1;d++){if(typeof(dadosMeteoro[d])!="undefined"&&dadosMeteoro[d].length>16){variaveis=dadosMeteoro[d].split(";");for(c=0;c<8;c++){valores=variaveis[c].split(":");for(i=1;i<=8;i++){switch(c){case 0:dadosVento[d][i]=Number(valores[i-1]);if(maxVento<dadosVento[d][i]){maxVento=dadosVento[d][i]}
break;case 1:dadosDirVento[d][i]=Number(valores[i-1]);break;case 2:dadosRajadaVento[d][i]=Number(valores[i-1]);if(maxVento<dadosRajadaVento[d][i]){maxVento=dadosRajadaVento[d][i]}
break;case 3:dadosCape[d][i]=Number(valores[i-1]);break;case 4:dadosPressao[d][i]=Number(valores[i-1])+850;if(maxPressao<dadosPressao[d][i]){maxPressao=dadosPressao[d][i]}
if(minPressao>dadosPressao[d][i]){minPressao=dadosPressao[d][i]}
break;case 5:dadosTemper[d][i]=Number(valores[i-1]);if(maxTemper<dadosTemper[d][i]){maxTemper=dadosTemper[d][i]}
if(minTemper>dadosTemper[d][i]){minTemper=dadosTemper[d][i]}
break;case 6:dadosNuvens[d][i]=Number(valores[i-1]);break;case 7:dadosPrecip[d][i]=Number(valores[i-1]);if(maxPrecip<dadosPrecip[d][i]){maxPrecip=dadosPrecip[d][i]}
break;}}}}}
var aom=Number(anoIniMeteoro);if(aom>2000)aom-=2000;var unixHoje=new Date(Number(anoHoje),mesHoje-1,diaHoje);var unixMeteoro=new Date(aom,mesIniMeteoro-1,diaIniMeteoro);numAtrasoDadosMeteoro=parseInt((unixHoje.getTime()-unixMeteoro.getTime())/86400000);mostraValoresMeteoro();}
function setTipoVento(vento){var tipo_vento="";angulo=orientacao-vento;if(angulo>180||angulo<-180){if(orientacao<vento){angulo=(orientacao+360)-vento;}else{angulo=orientacao-(vento+360);}}
angulo=Math.abs(angulo);if(angulo>AnguloTerral){tipo_vento=offshr;}
else if(angulo>65){tipo_vento=crss;}
else{tipo_vento=onShr;}
return tipo_vento;}
function setaSequenciaIdDias(){var aa,mm,dd,d,m,a,c;aa=parseInt(anoHoje);mm=parseInt(mesHoje);dd=parseInt(diaHoje);if(aa>2000)aa-=2000;numDataInicial=10000*aa+100*mm+dd;numDiaSemInicial=parseInt(diaSemana);for(i=0;i<idDiaOceano.length;i++){if(idDiaOceano[i]==numDataInicial){sequenciaIdDias[0]=i;break;}}
for(c=1;c<maxDias;c++){d=dd+c;m=mm;a=aa;if(d>diaFim[m]){d-=diaFim[m];m++;if(m>12){m=1;a++;}}
t=10000*a+100*m+d;for(i=0;i<idDiaOceano.length;i++){if(idDiaOceano[i]==t){sequenciaIdDias[c]=i;break;}}}}
var id_atividade="";function abreAtividade(id){$("#conteudo-box0").show();$("#fecha_atividades").show();$("#avisos_atividades").hide();$("#nova_atividade").hide();$("#meus_equipamentos").hide();$("#minhas_atividades").hide();$("#organize-atividades").hide();if(id_atividade!=id){$("#"+id).slideDown();}
id_atividade=id;if(id=="nova_atividade"){$.getJSON("/equipamentos/json",function(data){$.each(data,function(i){$('<option>').attr({'value':data[i].id}).html(data[i].nome).appendTo('#equipamento_relatorio');});if(idioma==0)txt="Adicionar Equipamento";else txt="Add equipment";$('<option>').attr({'value':-2}).html(txt+"...").appendTo('#equipamento_relatorio');});}
$("#div_recentes").load("/atividades/atividades");$("#div_equipamentos").load("/equipamentos/equipamentos");}
function fechaAtividade(){$("#avisos_atividades").hide();if(id_atividade!="")$("#"+id_atividade).hide();$("#conteudo-box0").slideUp();id_atividade="";$("#fecha_atividades").hide();}
function setVento(){var v,s;var a=$("#range_vento").val();if(a==-1)a=0;var b=10*$("#direcao_vento1").is(':checked')+20*$("#direcao_vento2").is(':checked')+30*$("#direcao_vento3").is(':checked');$("#vento_relatorio").val(parseInt(b)+parseInt(a));}
function setAltura(){var a,c,v,s;var a=$("#range_relatorio").val();if(a<52){v=parseInt(10*a/20);}else if(a<70){v=10*(parseInt((a-55)/10)+3);}else{v=10*(parseInt(5*(a-70)/30)+5);}
var alturas=[2,5,7,10,13,18,20,23,28,33,38,50,60,70,80,90,1000];var achou=false;var c=0;while(!achou){if(v<alturas[c]){if(unidadeAltura=='m')s=textosAltura[0][c];else s=textosAltura[1][c];achou=true;}
c++;if(c>=alturas.length){s=textosAltura[1][alturas.length-1];v=100;break;}}
$("#texto_altura").html(s);$("#altura_relatorio").val(v);}
function marcaNota(nota){var n=parseInt(nota);for(var c=0;c<nota;c++){$("#estrela_nota_"+String(c+1))[0].className="acesa";}
for(var c=nota;c<5;c++){$("#estrela_nota_"+String(c+1))[0].className="apagada";}
$("#qualidade_relatorio").val(n);$("#texto_nota").html(notas[n]);}
function enviarRelatorio(){var praia=$("#praia_relatorio").val();var altura=$("#altura_relatorio").val();var esporte=$("#esporte_relatorio").val();var equipamento=$("#equipamento_relatorio").val();var qualidade=$("#qualidade_relatorio").val();var dia=$("#dia_relatorio").val();var hora=$("#hora_relatorio").val();var publica=$('#publica_relatorio').is(':checked');var vento=$("#vento_relatorio").val();var comentarios=$("#comentarios_relatorio").val().trim();var checado=true;if(esporte<0){if(idioma==0)alert('Selecione o tipo de atividade.');else alert('Select the activity type.');checado=false;}
if(equipamento<0&&checado){if(idioma==0)alert('Selecione o equipamento que foi usado, ou escolha nenhum equipamento.');else alert('Select the equipment used, or choose no equipment.');checado=false;}
if(praia<0&&checado){if(idioma==0)alert('Selecione a praia.');else alert('Select the beach.');checado=false;}
if(dia.length==0&&checado){if(idioma==0)alert('Selecione o dia da atividade.');else alert('Select the day of activity.');checado=false;}else{dma=dia.split("-");var aa=2000+anoHoje;if(parseInt(dma[0])>aa||(parseInt(dma[0])==aa&&parseInt(dma[1])>mesHoje)||(parseInt(dma[0])==aa&&parseInt(dma[1])==mesHoje&&parseInt(dma[2])>diaHoje)){if(idioma==0)alert('o dia da atividade não pode ser no futuro!');else alert('The day of activity cannot be in the future!');checado=false;}}
if(hora==-1&&checado){if(idioma==0)alert('Selecione a hora da atividade.');else alert('Select the time of activity');checado=false;}
if(checado){if(altura<0&&qualidade<0&&vento<0&&comentarios.length<2){checado=false;if(idioma==0)txt="Você não preencheu nenhuma informação sobre as condições do mar e do vento, nem comentários. Estas informações podem no futuro lhe ajudar a reconhecer um dia bom para praticar novamente a sua atividade. Tem certeza que deseja registrar a sua atividade sem estas informações?";else txt="You did not fill in any information about sea and wind conditions, nor comments. This information may in the future help you recognize a good day to practice your activity again. Are you sure you want to register your activity without this information?";if(confirm(txt)){checado=true;}}}
if(checado){$("#nova_atividade").hide();$("#label_organize").hide();$("#organize-atividades").show();id_atividade="";if(idioma==0)txt="Registrando a sua atividade";else txt="Recording your activity";$("#avisos_atividades").show().html(txt+"...");var fonte="/atividades/nova?altura="+altura+"&qualidade="+qualidade+"&dia="+dia+"&hora="+hora+"&praia="+praia+"&vento="+vento+"&pub=0&esporte="+esporte+"&equipamento="+equipamento+"&comentarios="+comentarios;$.getJSON(fonte,function(data){if(data.ok==1){if(idioma==0)txt="A sua atividade foi registrada!";else txt="Your activity has been recorded!";$("#avisos_atividades").html(txt);zera_atividade();}});}}
function checaValorRelatorio(){var praia=$("#praia_relatorio").val();if(praia==-2){window.location.href="/atividades/adicionar";}}
function checaValorEquipamento(){var equipamento=$("#equipamento_relatorio").val();if(equipamento==-2){window.location.href="/equipamentos";}}
function zera_atividade(){$(".seletor_atividade select option[value=-1]").attr('selected','selected');$("#vento_relatorio select option[value=0]").attr('selected','selected');$("#comentarios_relatorio").val("");}
function historico(tipo){var dat=$("#datepicker").val();dat=dat.replaceAll("-","");var pr=praia.trim();if(pr==""||pr=="0")pr="oceanica";var url="/historico/"+pais+"/"+estado+"/"+municipio+"/"+pr+"/"+dat;if(tipo==1){url=url+"?tipo=tabela";}
window.location.href=url;}